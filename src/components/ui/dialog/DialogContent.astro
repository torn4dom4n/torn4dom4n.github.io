---
import { XIcon } from "lucide-react";
import type { HTMLAttributes } from "astro/types";
import { tv } from "tailwind-variants";

import { cn } from "@/lib/utils";

interface Props extends HTMLAttributes<"dialog"> {}

const { class: className = "", ...rest } = Astro.props;
---

<div
  class={cn(
    "dialog-backdrop fixed inset-0 z-50 hidden bg-black/80 data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=closed]:animate-out data-[state=closed]:fade-out-0",
    className,
  )}
  {...rest}
  data-state="closed"
  aria-hidden="true"
>
</div>

<dialog
  class={cn(
    "fixed top-16 left-1/2 z-50 w-full max-w-md border bg-background p-8 shadow-lg sm:rounded-lg",
    "transform -translate-x-1/2 sm:top-1/2 sm:-translate-y-1/2",
    "data-[state=open]:animate-in data-[state=closed]:animate-out",
    "data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=open]:slide-in-from-bottom-2",
    "data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[state=closed]:slide-out-to-bottom-2",
    className,
  )}
  data-state="closed"
  {...rest}
  aria-modal="true"
  role="dialog"
>
  <slot />

  <button
    type="button"
    class={cn(
      "dialog-close absolute top-5 right-5 text-muted-foreground rounded-sm opacity-70 transition-opacity hover:opacity-100 disabled:pointer-events-none focus-visible:outline-outline focus-visible:outline-2 focus-visible:outline-offset-2",
      className,
    )}
    {...rest}
    data-dialog-close
    aria-label="Close dialog"
  >
    <XIcon />
    <span class="sr-only">Close</span>
  </button>
</dialog>
